---
title: "SSH 基本原理 & Git"
date: 2024-08-22
categories: setup-basics
---


#### SSH（Secure Shell）是一個用來在不安全網路上進行安全通信的協議，主要包括以下三個層面。


### Transport Layer
**目的**: 建立一個安全的加密通道來保護數據的機密性、完整性和伺服器的驗證。  
**運作方式**: 首次連線伺服器會提供一組公鑰，詢問客戶端是否信任此來源。如果信任，這個公鑰會被存在使用者本地的 `~/.ssh/known_hosts` 檔案中。之後再次登入時，使用者可以憑這個鑰匙辨識之前是否已登入過此伺服器。  

### User Authentication Layer
**目的**: 確認連接的使用者是否擁有合法的身份來訪問伺服器。
**運作方式**: 伺服器會對使用者的身份進行驗證。初次設定時，伺服器會從使用者那裡取得一組公鑰並存放在伺服器端。之後登入時，伺服器會比對使用者的私鑰，若比對成功，則允許進入伺服器。

### Connection Layer
**目的**: 管理通過單一 TCP 連接的多個邏輯通道（channels），允許在一個 SSH 連接中執行多個操作，比如同時傳送檔案、執行命令或進行遠端桌面訪問。



------


## Git 基本操作

Git 是一個分散式版本控制系統，常見的操作包括以下幾個部分：

```bash
git init
```

在**當前**資料夾內初始化一個 Git repository。假設有 a, b, c 三個資料夾，這三個 Git repository 是完全獨立的。  


```bash
git remote set-url <遠端名稱> <新的URL>
```
設置遠端 repository。
git remote set-url origin https://github.com/username/new-repository.git
這些命令可以幫助你更改遠端 repository 的 URL，例如當你將專案搬到新的 GitHub repository 時。

### 3. git 基本操作

- **添加、提交與推送**:

    - `git add .` : 添加所有變更的檔案。
    - `git commit -m "註解 tag"` : 提交變更並附上註解。
    - `git push` : 將本地的提交推送到遠端 repository。
    - `git pull` : 從遠端拉取最新的變更。

---

## 透過 SSH 連線至 Github.io

上傳至 Github.io 可以使用兩種連線方式：

### 1. 帳號密碼登入

- **使用方式**: 適合在不同設備或網路環境下快速登入。

    - URL: `https://github.com/username/repository.git`

### 2. SSH 認證連線

- **使用方式**: 設定一次後就不需要每次都輸入帳號密碼，適合長期使用。

    - URL: `git@github.com:username/repository.git`

### 前置準備

1. **生成 SSH 密鑰**:
    - 從本地生成一組 SSH 密鑰，並確保密鑰為成對：
    
    ```bash
    ssh-keygen -lf ~/.ssh/id_rsa
    ssh-keygen -lf ~/.ssh/id_rsa.pub
    ```

2. **添加私鑰到本地 SSH-agent**:
    - 將私鑰添加到本地端的 SSH-agent，以便遠端伺服器辨認。

3. **添加公鑰到 GitHub 帳戶**:
    - 將生成的公鑰添加到 GitHub 帳戶中，以便進行 SSH 認證。

### 執行步驟

1. **更改 remote 路徑為 SSH 格式**:

    ```bash
    git remote set-url origin https://github.com/username/new-repository.git
    ```
    
    改為：
    
    ```bash
    git remote set-url origin git@github.com:username/repository.git
    ```

2. **測試 SSH 連接**:

    ```bash
    ssh -T git@github.com
    ```
    
    這將測試 SSH 連接，並發送信任請求給本地電腦。成功訊息範例如下：

    ```plaintext
    Hi xxx! You've successfully authenticated, but GitHub does not provide shell access.
    ```

這篇筆記涵蓋了 SSH 的基本原理與 Git 的基本操作，以及如何透過 SSH 連線至 Github.io。希望對你有幫助！
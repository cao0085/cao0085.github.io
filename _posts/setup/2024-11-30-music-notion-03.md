---
title: "Music Notion（三）：檢討＆心得"
date: 2024-11-30
categories: setup-basics
# algorithm-leetcode
# code-notes
# setup-basics
---
<!-- 大綱引言 -->
###### 檢討＆下次還可以改進哪部分



<!-- 正文 -->


寫程式到現在遇到"不知道問題在哪裡"已經滿習慣了，這次更慘的就是"根本沒有提供這個功能"然後還和 Chat GPT 瞎弄，檢討記錄一下完全白走的冤旺路。

### 了解規則

- Spotify API 限制
    - Access Token：獲取 Access Token 資格並不意味著可以直接使用所有功能
    - 需要 Premium 帳號：只有 Premium 帳號才能使用 Spotify Web Playback SDK 播放功能。
    - 開發者清單限制：需要手動將測試帳號加入到 Spotify Developer Dashboard 的白名單中。
    - track操作方面會同時用到 API & playback 

- 伺服器連接
    - Ipad 連線是需要輸入 192.168.50.222:xxxx 連線伺服器而非 localhost:xxxx，導致 Spotify callback 功能在 Ipad 不能運行。
    - IP 的192.168.50.222中的後三碼會浮動（還不知原因），所以開發前要先檢查一次再測試。

- Ipad Safari 限制
    - Safari 有設計一些安全機制，導致我開發時以為是程式碼的問題瘋狂修改，最後才知道是移動裝置的瀏覽器特性。
    - 不能自動播放音檔
    - 自動路由跳轉限制
    - 調整瀏覽器的播放音量

- Server 開發工具
    - 剛開始單元測試是用 liveserver + TS 自動編譯，開發環境用 Webpack
    - 要了解各自的行為模式，在debug能即時定位問題 
    
 
這部分最難的地方就是要瞭解到什麼程度再開始操作，例如知道 Ipad Safari 有自動播放限制後，就在 Spotify api 接了一些隱藏事件，快做完後才發現官方有提供一個activeelement()來解決這個問題，實作上也不太可能每次做都很全面的發問再執行，所以就要靠經驗累積了？



### 捨得重構代碼

這次專案功能設計與版面布局都經歷了多次修改，心得就是有 ChatGPT 重構代碼會比硬幹來得有效率。我在PlayerBar 都設計好了只差一個 即時同步獲取歌曲時間總長度 功能失敗，弄個一個下午還是沒結果，下定決心後導入一些設計模式重寫一遍，大概兩個小時就完成了。


### 優先順序
可以的話一開始就要把版面配置好，牽涉到功能設計的要及早定位，再來就是要懂的預留空間彈性，
再次製作流程可能會更改成：

考量設備特性 -> 設計好 Header / Content / footer 響應式比例，挑選 開源UI -> 單元功能測試(不能偷懶放在同個.ts) -> 細調整外觀設計

<br>

### 專案心得總結


身為程式語言初學者，實做的過程中就可以發現，想得到的功能其實都已經有前人寫好了，差的就是如妥善應用。最困難的部分在於如何挑選合適工具，並了解它們的核心功能到什麼程度再開始操作。

<br>

現代瀏覽器的性能都很好，其實背景持續跑執行一些功能滿無所謂的。在有開發時間的壓力下做點取捨是必要的，畢竟
只有相對優化沒有最好？

<br>

專案重構的話要修正的部分：Error提示處理、資料儲存的格式、播放器內部策略耦合性還是太高、token儲存在cookies、翻頁的邏輯要更彈性、中英文版本切換。